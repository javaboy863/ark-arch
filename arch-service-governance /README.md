# 1.背景
&emsp;&emsp;
服务治理可以说是稳定性保障的一部分，同样是架构师的基本功，在此单独阐述，也可以看做是对稳定性保障体系的细化。

# 2.为什么要服务治理
&emsp;&emsp;
在微服务环境下，你会发现遇到一系列新的问题（相比原单体应用）和挑战。比如：集群环境中你如何快速定位问题出在哪？整个集群的调用关系是什么样的，如何梳理？合理不合理？整个集群的性能瓶颈在哪？这些都是架构师要直面的问题。
而对于一线研发来说，团队被拆分了，团队之间如何高效的协作？系统被拆分了，功能被分散到远程节点，如何做调试？分布式架构下的数据一致性如何保障？等等。

&emsp;&emsp;
所以这种影响是全方位的，影响的绝不仅仅只是应用系统，它会对整个研发体系，包括开发、运维、团队组织、协同都带来冲击，我们必须构建起一整套从线下到线上的新的能力体系来支撑这套新的架构。我见过很多团队没能构建起这套能力体系，因此受到了服务化带来的反噬下，而忘记了搞微服务的初衷。

# 3.整体服务治理策略
&emsp;&emsp;
通过服务的度量、管控、管理三大措施，构建起一套完善的闭环体系。


# 4.度量体系
&emsp;&emsp;
服务治理既要进行线上的治理，也要进行线下的治理，通过线上线下两大维度进行治理指标的采集，并把它汇总到数据仓库中，进行统一的度量和分析。

- 信息收集（度量指标，尤其是线下度量指标，包括架构、开发、测试、运维、过程协作效率等）
- 汇总分析
- 治理决策和管控指令

# 5.管控体系 - 服务线上治理
&emsp;&emsp;
在上面收集到的度量指标中，有相当一部分线上的性能及异常指标会被转化为运维事件，一旦触发我们预先设置的阈值，就会被进一步转化成治理管控指令，并通过调度中心下发，驱动云上的资源编排和调度能力，进行服务的弹性伸缩、扩容缩容操作，以应对流量的波动，或者直接驱动服务进行服务内部的限流、降级、容错、路由调整等管控操作。

- 故障定界定位        
    - 大盘-异常最多服务的TopN排序
    - 故障定位-链路溯源报警
    - 大盘-http状态散点图
    - 异常TopN排序列表
    - 链路溯源报警
    - 异常明细大盘
    - 性能大盘
    - 异常明细列表
- 生命周期管理    
  &emsp;&emsp; 从线下的产品设计、服务应用开发、服务应用构建，到线上的服务应用部署、监控与运维的全生命周期管理平台，方便的进行服务的上线、下线、扩容、缩容等操作。
- 容量规划        
    - 容量规划
    - 容量预估
    - 性能压测
- 服务降级        
    - 预案化
    - 兜底
    - 熔断
- 集群容错        
    - 重试次数
    - 策略
- 服务限流        
    - 一体化限流能力
- 资源的治理        
  &emsp;&emsp; 对于线上任何资源，如果只有服务对它进行调用，那么完全可以基于服务对资源的调用日志来分析资源的使用状况、性能状况。


# 6. 管理体系 - 服务线下管控
&emsp;&emsp;
在上面收集到的另一些度量指标中，包括架构、开发、测试、运维、过程协作效率等指标会通过治理委员会进行人为的深入分析，并制定出治理决策，这些治理决策会通过相关的管理措施进行落地。

- 整体架构治理        
    - 图论调用关系
    - 分层向下依赖，有向无环图
    - 没有调用的孤零节点
    - TOPN最多节点
    - TOPN最深链路
    - 通过服务之间的调用关系来针对服务化的整体架构进行度量和治理
    - 冗余服务检测
    - 最长调用深度检测
    - 无效报警治理
    - 服务定义及管理
    - 服务的调用、路由、容错
    - 服务路由
    - 服务安全
    - 依赖治理
    - 闭环检测

- 单个微服务架构治理        
    - 代码质量
    - 个人开发质量
    - 团队代码质量
    
- 分布式调测能力构建        
    - 分布式下RD最大痛点
    - Mock抓取在线数据
- 测试度量及治理        
    - 测试覆盖度
    - 测试用例维护成本度量
- 高效团队协同模式及治理
    - 高效团队协同模式及治理
    - 架构优化
    - UI的设计
    - 用报表体现研发生命周期的协同评估，研发利用率评估
    - 研发利用率评估
- 团队协同质量度量及治理        
    - 数据驱动的精益看板
    - 交付过程指标度量
    - 持续交付效率优化

# 6. 数据治理 
- 数据门户
- 数据安全
- 数据质量
- 流程规范
- 任务调度